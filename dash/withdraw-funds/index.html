<!DOCTYPE html>

<html class="loading" lang="en" data-textdirection="ltr">



<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui, viewport-fit=cover">

    <title>Withdraw Funds | User Account Dashboard - Blue Block</title>

    <link rel="shortcut icon" type="image/x-icon" href="../withdraw-funds/index/secured/images/favicon.png">

    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!-- BEGIN: VENDOR CSS-->
    <link rel="stylesheet" type="text/css" href="../withdraw-funds/index/secured/app-assets/vendors/vendors.min.css">
    <link rel="stylesheet" type="text/css"
        href="../withdraw-funds/index/secured/app-assets/vendors/flag-icon/css/flag-icon.min.css">
    <link rel="stylesheet" href="../withdraw-funds/index/secured/app-assets/vendors/noUiSlider/nouislider.min.css"
        type="text/css">
    <!-- END: VENDOR CSS-->
    <!-- BEGIN: Page Level CSS-->
    <link rel="stylesheet" type="text/css"
        href="../withdraw-funds/index/secured/app-assets/css/themes/vertical-modern-menu-template/materialize.min.css">
    <link rel="stylesheet" type="text/css"
        href="../withdraw-funds/index/secured/app-assets/css/themes/vertical-modern-menu-template/style.min.css">
    <!-- END: Page Level CSS-->
    <!-- BEGIN: Custom CSS-->
    <link rel="stylesheet" type="text/css" href="../withdraw-funds/index/secured/app-assets/css/custom/custom.css">
    <!-- END: Custom CSS-->

    <link rel="stylesheet" type="text/css" href="../withdraw-funds/index/secured/app-assets/css/pages/lock.min.css">
    <link rel="stylesheet" href="sweetalert2/dist/sweetalert2.min.css">



    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.22.1/dist/sweetalert2.all.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/sweetalert2@11.22.1/dist/sweetalert2.min.css" rel="stylesheet">

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="../../config.js"></script>

    <script type="module">
        import { supabase, AuthService, handleGlobalLogout } from '../../supabase.js';

        function showSpinnerModal() {
            const modal = document.getElementById('spinnerModal');
            if (modal) modal.style.display = 'flex';
        }

        function hideSpinnerModal() {
            const modal = document.getElementById('spinnerModal');
            if (modal) modal.style.display = 'none';
        }

        let currentUser = null;


        function setupVisibilityRealtime() {
            supabase
                .channel('public_status')
                .on(
                    'postgres_changes',
                    { event: 'UPDATE', schema: 'public', table: 'admin', filter: 'id=eq.1' },
                    (payload) => {
                        // If visibility is turned off while user is on page
                        if (payload.new.website_visibility === false) {
                            AuthService.removeSession();
                            window.location.href = '../../505.html';
                        }
                    }
                )
                .subscribe();
        }

        /**
         * INITIAL CHECK & STARTUP
         */
        async function startDashboardSecurely() {
            // 1. Initial Fetch (Immediate check on load)
            const { data: admin } = await supabase
                .from('admin')
                .select('website_visibility')
                .eq('id', 1)
                .single();

            if (admin && admin.website_visibility === false) {
                AuthService.removeSession();
                window.location.href = '../../505.html';
                return;
            }

            // 2. Start Realtime Watcher (Wait for changes)
            setupVisibilityRealtime();

            // 3. Continue with your existing dashboard functions
            const userId = AuthService.getSession();
            if (userId) {
                initDashboard(); // Your existing function
                initPage();      // Your existing function
            } else {
                window.location.href = '../../login/index.html';
            }
        }

        // Execute the secure startup
        startDashboardSecurely();

        async function initializeWithdrawalPage() {
            showSpinnerModal();
            const userId = AuthService.getSession();

            if (!userId) {
                window.location.href = "../login/index.html";
                return;
            }

            try {
                // Fetch the user profile to get the real-time balance and status
                const user = await AuthService.fetchProfile(userId);
                if (user && user.active === 'Active') {
                    currentUser = user;

                    // Update UI
                    document.getElementById("weuss").innerHTML = `${user.first_name} ${user.last_name}`;
                    document.getElementById("country").innerHTML = user.country;

                    const flagEl = document.getElementById("flag");
                    if (flagEl && user.countryFlag) {
                        flagEl.src = user.countryFlag;
                    }

                    const profileImg = user.profile_picture || "../profile/index/secured/images/userlogo.png";
                    ["pmler", "pmler2", "pmler3"].forEach(id => {
                        const img = document.getElementById(id);
                        if (img) img.src = profileImg;
                    });

                    // Cache balance for validation
                    localStorage.setItem("AB", user.account_balance);
                    hideSpinnerModal();
                } else {
                    window.location.href = "../login/index.html";
                }
            } catch (err) {
                console.error("Init Error:", err.message);
                hideSpinnerModal();
            }
        }

        // Withdrawal Method Toggle
        document.getElementById("withdrawalMethod").addEventListener("change", function () {
            if (this.value === "Bank Transfer") {
                document.getElementById('banksection').classList.remove("hide");
                document.getElementById('cryptofom').classList.add("hide");
            } else {
                document.getElementById('banksection').classList.add("hide");
                document.getElementById('cryptofom').classList.remove("hide");
            }
        });

        document.getElementById('form').addEventListener('submit', async (event) => {
            event.preventDefault();

            const formData = new FormData(event.target);
            const amountStr = formData.get('amount');
            const amount = parseFloat(amountStr);
            const method = formData.get('withdrawalMethod');
            const userId = AuthService.getSession();

            // 1. BASIC VALIDATION
            if (!amountStr || isNaN(amount) || amount <= 0) {
                return Swal.fire('Invalid Amount', 'Please enter a valid positive number.', 'warning');
            }

            // 2. STATUS CHECK
            if (currentUser.withdraw_status === 'Inactive') {
                return Swal.fire('Access Denied', 'Your withdrawal status is currently INACTIVE. Contact support.', 'error');
            }

            // 3. CAPTURE METHOD DETAILS
            let details = {};
            if (method === "Bank Transfer") {
                details = {
                    crypto_bank: formData.get('bank_name'),
                    address_account: formData.get('acct_no'),
                    acct_name: formData.get('acct_name'),
                    swift: formData.get('acct_swift')
                };
                if (!details.crypto_bank || !details.address_account || !details.acct_name) {
                    return Swal.fire('Missing Information', 'Please provide Bank Name, Account Number, and Account Name.', 'warning');
                }
            } else {
                const network = formData.get('pay_method');
                const walletAddress = formData.get('btc_address');
                if (!network || network === "Please Select Method") {
                    return Swal.fire('Selection Required', 'Please select a Crypto Network.', 'warning');
                }
                if (!walletAddress || walletAddress.trim().length < 10) {
                    return Swal.fire('Invalid Address', 'Please enter a valid Wallet Address.', 'warning');
                }
                details = {
                    crypto_bank: network,
                    address_account: walletAddress,
                    acct_name: '-',
                    swift: '-'
                };
            }

            showSpinnerModal();

            try {
                // 4. FETCH REAL-TIME PROFILE (Prevent Overwriting & Validate Balance)
                const { data: profile, error: profileErr } = await supabase
                    .from('user_profiles')
                    .select('account_balance, pendingwithdraw')
                    .eq('uuid', userId)
                    .single();

                if (profileErr) throw profileErr;

                const currentBalance = parseFloat(profile.account_balance) || 0;
                const currentPending = parseFloat(profile.pendingwithdraw) || 0;

                if (amount > currentBalance) {
                    hideSpinnerModal();
                    return Swal.fire('Insufficient Funds', `You only have ${currentUser.currency || '$'}${currentBalance} available.`, 'error');
                }

                // 5. CALCULATE NEW TOTALS
                const newBalance = currentBalance - amount;
                const newPendingTotal = currentPending + amount;

                // 6. INSERT INTO WITHDRAW REQUESTS TABLE
                const { error: withdrawErr } = await supabase.from('withdraw').insert([{
                    amount: amount.toString(),
                    crypto_bank: details.crypto_bank,
                    date: new Date().toLocaleString(),
                    address_account: details.address_account,
                    status: 'Pending',
                    swift: details.swift,
                    acct_name: details.acct_name,
                    uuid: userId
                }]);

                if (withdrawErr) throw withdrawErr;

                // 7. UPDATE USER PROFILE (Deduct Balance + Add to Pending)
                const { error: updateProfileErr } = await supabase
                    .from('user_profiles')
                    .update({
                        account_balance: newBalance,
                        pendingwithdraw: newPendingTotal
                    })
                    .eq('uuid', userId);

                if (updateProfileErr) throw updateProfileErr;

                // Success Cleanup
                localStorage.setItem("AB", newBalance);
                hideSpinnerModal();

                Swal.fire({
                    icon: 'success',
                    title: 'Success',
                    text: 'Withdrawal request submitted. Funds are now in pending status.',
                    confirmButtonColor: '#2196f3'
                }).then(() => location.reload());

            } catch (err) {
                hideSpinnerModal();
                console.error("Submission Error:", err.message);
                Swal.fire('Error', err.message, 'error');
            }
        });

        initializeWithdrawalPage();

        window.showHistoryOptions = function () {
            Swal.fire({
                title: 'Select History',
                html: `
            <div style="display:flex; flex-direction:column; gap:10px;">
                <a href="../investments/index.html" class="btn indigo">Pending Deposits</a>
                <a href="../trade_history/index.html" class="btn indigo">Trade History</a>
                <a href="../market_history/index.html" class="btn indigo">Pending Withdraws</a>
                <a href="../deposit_list/index.html" class="btn indigo">Approved Deposits</a>
                <a href="../withdrawal-history/index.html" class="btn indigo">Withdrawal History</a>
            </div>
        `,
                showConfirmButton: false,
                showCloseButton: true,
                background: '#01123c',
                customClass: { title: 'white-text' }
            });
        };

        // 2. Fixed Logout Logic
        // There was a bug where the logout listener wasn't attached correctly
        const logoutBtn = document.getElementById('out');
        if (logoutBtn) {
            logoutBtn.addEventListener('click', () => {
                Swal.fire({
                    title: 'Logout?',
                    text: "You will be signed out of your session",
                    icon: 'warning',
                    showCancelButton: true,
                    confirmButtonColor: '#fb8c00',
                    confirmButtonText: 'Yes, logout'
                }).then((result) => {
                    if (result.isConfirmed) {
                        // Clear local session data here if needed
                        window.location.href = "../../login/index.html";
                    }
                });
            });
        }


        async function initPage() {
            // 1. Get the session (already protected by supabase.js import)
            const userId = AuthService.getSession();

            try {
                // 2. Load User Profile
                const user = await AuthService.fetchProfile(userId);

                // Update your UI (Example)
                document.getElementById("weuss").innerHTML = `${user.first_name} ${user.last_name}`;
                document.getElementById("xxpol").innerHTML = (user.currency || '$') + user.account_balance;

            } catch (err) {
                console.error("Auth Error:", err.message);
            }
        }

        // 3. Setup Logout Buttons
        document.addEventListener('DOMContentLoaded', () => {
            const logoutButtons = document.querySelectorAll('#out, #m-logout');

            logoutButtons.forEach(btn => {
                btn.addEventListener('click', (e) => {
                    e.preventDefault();

                    Swal.fire({
                        title: 'Confirm Logout',
                        text: "This will log you out of all active tabs.",
                        icon: 'warning',
                        showCancelButton: true,
                        confirmButtonColor: '#2196f3',
                        cancelButtonColor: '#d33',
                        confirmButtonText: 'Yes, logout',
                        background: '#01123c',
                        color: '#fff'
                    }).then((result) => {
                        if (result.isConfirmed) {
                            // This call triggers the 'storage' event in all other tabs
                            handleGlobalLogout(() => {
                                window.location.href = "../../login/index.html";
                            });
                        }
                    });
                });
            });
        });

        initPage();


        // Monitor and kill Jivosite default bubble if it tries to appear
        const killJivoBubble = () => {
            // Select all potential Jivo elements
            const elementsToHide = document.querySelectorAll(
                'jdiv[class^="button_"], jdiv[class^="label_"], .jivo-btn-container, #jivo-label'
            );
            elementsToHide.forEach(el => {
                el.style.setProperty('display', 'none', 'important');
                el.style.setProperty('visibility', 'hidden', 'important');
            });
        };

        // Run more frequently at start to catch the PC injection
        let jivoCounter = 0;
        const jivoKiller = setInterval(() => {
            killJivoBubble();
            if (jivoCounter++ > 20) clearInterval(jivoKiller); // Increased to 20 to be safe
        }, 300);



        window.openLiveChat = function () {
            if (typeof jivo_api !== 'undefined') {
                const container = document.getElementById('jivo-iframe-container');

                // Force CSS transition to visible
                if (container) {
                    container.classList.add('jivo-active');
                    container.style.setProperty('display', 'block', 'important');
                    container.style.setProperty('visibility', 'visible', 'important');
                    container.style.setProperty('opacity', '1', 'important');
                    container.style.setProperty('z-index', '2147483647', 'important');
                }

                // Open the native chat window
                jivo_api.open();
            } else {
                // Retry if script is still downloading
                setTimeout(window.openLiveChat, 500);
            }
        };

    </script>

</head>
<!-- END: Head-->

<body
    class="vertical-layout vertical-menu-collapsible page-header-dark vertical-modern-menu preload-transitions 2-columns   "
    data-open="click" data-menu="vertical-modern-menu" data-col="2-columns">

    <!-- BEGIN: Header-->
    <!-- BEGIN: Header-->

    <style>
        .sidenav li a.collapsible-header>i.material-icons,
        .sidenav li>a>i.material-icons {

            color: #562fa1;
        }
    </style>

    <style>
        /* PC View Enhancements: Stretching the sidebar height */
        .sidenav-main {
            height: 100vh !important;
            padding-bottom: 50px;
        }

        /* Header & Mobile Logo Styling */
        .mobile-header-logo {
            height: 40px;
            margin-top: 10px;
            object-fit: contain;
        }

        /* Padding for header profile image to prevent touching corners */
        .navbar-list .profile-button {
            padding: 0 15px !important;
            display: flex;
            align-items: center;
        }

        /* Mobile Bottom Nav */
        .mobile-bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 65px;
            background: #01123c;
            display: none;
            justify-content: space-around;
            align-items: center;
            z-index: 999;
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.3);
            border-top: 1px solid #1e88e5;
        }

        .mobile-nav-item {
            color: #fff;
            text-align: center;
            font-size: 10px;
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
        }



        .mobile-nav-item.active {
            color: #fb8c00;
            /* Highlight color for active page */
        }

        .mobile-nav-item i {
            font-size: 24px;
            margin-bottom: 2px;
        }



        @media only screen and (max-width: 992px) {

            .sidenav-main,
            .sidenav-trigger {
                display: none !important;
            }

            .mobile-bottom-nav {
                display: flex;
            }

            #main {
                padding-bottom: 70px;
            }
        }
    </style>



    <!-- BEGIN: Header-->

    <style>
        .sidenav li a.collapsible-header>i.material-icons,
        .sidenav li>a>i.material-icons {

            color: #562fa1;
        }

        /* Ensure the Nav Bar is a flexible container */
        .nav-wrapper {
            display: flex !important;
            align-items: center !important;
            justify-content: space-between !important;
            height: 64px;
            padding: 0 15px;
        }

        /* Group the right-side icons so they align together */
        .header-actions-right {
            display: flex;
            align-items: center;
            gap: 5px;
            /* Space between Chat and Profile */
        }

        /* Fix icon vertical alignment */
        .header-actions-right i {
            line-height: 64px;
            height: 64px;
            display: flex;
            align-items: center;
        }

        /* Responsive logo sizing */
        .mobile-header-logo {
            height: 32px;
            width: auto;
            max-width: 120px;
            object-fit: contain;
        }

        /* Prevent Footer/Sidebar jump when SweetAlert is active */
        body.swal2-shown {
            overflow-y: auto !important;
            padding-right: 0 !important;
        }

        body.swal2-height-auto {
            height: 100% !important;
        }

        /* Ensure the footer stays pinned to the bottom during transitions */
        footer.page-footer {
            position: relative;
            z-index: 10;
        }

        /* Hide Jivosite Default Bubble */
        #jivo-iframe-container,
        .jivo-iframe-container,
        jdiv[class^="button_"],
        jdiv[class^="label_"] {
            display: none !important;
            visibility: hidden !important;
        }
    </style>

    <!-- pc view nav Css -->

    <style>
        /* PC SIDEBAR - HIGH-END PROFESSIONAL UI (FIXED) */
        @media only screen and (min-width: 993px) {
            aside.sidenav-main {
                display: block !important;
                height: 100vh !important;
                width: 260px !important;
                position: fixed !important;
                top: 0;
                left: 0;
                background: #01123c !important;
                /* Deep Navy BG */
                z-index: 1000 !important;
                box-shadow: 4px 0 15px rgba(0, 0, 0, 0.5) !important;
                border-right: 1px solid rgba(255, 255, 255, 0.05);
            }

            #main {
                padding-left: 260px !important;
            }

            #slide-out {
                margin: 0 !important;
                padding: 0 !important;
                background: transparent !important;
            }

            /* ROUTE BUTTONS - FIXED FOR LONG TITLES */
            .sidenav li a {
                height: 58px !important;
                line-height: 58px !important;
                padding: 0 25px !important;
                display: flex !important;
                align-items: center;
                color: rgba(255, 255, 255, 0.7) !important;
                font-size: 14.5px !important;
                font-weight: 500;
                transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1) !important;
                border-left: 0px solid #2196f3;
                /* Prevents text from splitting into two lines */
                white-space: nowrap !important;
            }

            /* STRONG HOVER EFFECT */
            .sidenav li a:hover {
                background: rgba(33, 150, 243, 0.15) !important;
                /* Light Blue Glow */
                color: #ffffff !important;
                padding-left: 35px !important;
                /* Noticeable Slide */
                border-left: 5px solid #2196f3 !important;
                /* Instant blue bar on hover */
            }

            /* ICON STYLING - VIBRANT BLUE */
            .sidenav li a i.material-icons {
                color: #2196f3 !important;
                /* Bright Material Blue */
                margin-right: 15px !important;
                font-size: 24px !important;
                transition: transform 0.3s ease;
            }

            .sidenav li a:hover i {
                transform: scale(1.2);
                /* Icon pops out on hover */
                color: #fff !important;
                /* Icon turns white on hover for contrast */
            }

            /* ACTIVE STATE */
            .sidenav li.active {
                background: rgba(33, 150, 243, 0.2) !important;
                border-left: 5px solid #2196f3;
            }

            .sidenav li.active a {
                color: #fff !important;
                font-weight: 700;
            }
        }

        /* PROFILE & FLAG AREA */
        .profile-box-custom {
            padding: 25px 15px !important;
            background: #01123c !important;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        #flag {
            display: inline-block !important;
            /* FORCED VISIBILITY */
            width: 22px !important;
            height: 15px !important;
            margin-left: 12px !important;
            vertical-align: middle;
            object-fit: cover;
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 2px;
        }

        #jivo-notification-wrapper,
        #jivositelabel,
        .jivo-btn,
        .jivo-label,
        jdiv[class^="button_"],
        jdiv[class^="label_"],
        jdiv[class*="omnichannel"],
        div[class^="jivo-host"] [class*="launcher"],
        /* New common Jivo selectors */
        div[id^="jivo-iframe-container"]:not(.jivo-active) {
            display: none !important;
            visibility: hidden !important;
            opacity: 0 !important;
            pointer-events: none !important;
            transform: scale(0) !important;
            position: fixed !important;
            bottom: -500px !important;
            /* Move it far off screen */
        }

        #jivo-iframe-container.jivo-active {
            display: block !important;
            visibility: visible !important;
            opacity: 1 !important;
            z-index: 2147483647 !important;
            bottom: 0 !important;
            transform: scale(1) !important;
            pointer-events: auto !important;
        }
    </style>

    <header class="page-topbar" id="header">
        <div class="navbar navbar-fixed">
            <nav style="background: #01123c !important;" class="navbar-main navbar-color navbar-dark no-shadow">
                <div class="nav-wrapper">

                    <div class="header-logo-container">
                        <a href="../index.html" style="display: flex; align-items: center;">
                            <img src="../con.png" alt="Logo" class="mobile-header-logo">
                        </a>
                    </div>
                    <div class="header-actions-right">
                        <a href="javascript:void(0);" id="chat-trigger" onclick="openLiveChat()"
                            class="waves-effect waves-block waves-light"
                            style="display: flex; align-items: center; padding: 0 10px;">
                            <i class="material-icons" style="font-size: 26px;">chat_bubble_outline</i>
                        </a>

                        <a class="waves-effect waves-block waves-light profile-button" href="javascript:void(0);"
                            style="display: flex; align-items: center; padding-left: 5px;">
                            <img style="height: 38px; width: 38px; object-fit: cover; border-radius: 50%; border: 1.5px solid #1e88e5;"
                                id="pmler" src="../profile/index/secured/images/userlogo.png" alt="avatar">
                        </a>
                    </div>

                </div>
            </nav>
        </div>
    </header>


    <aside class="sidenav-main nav-expanded nav-lock nav-collapsible sidenav-light">
        <div class="brand-sidebar"
            style="background: white !important; height: 64px; display: flex; align-items: center; justify-content: center;">
            <a class="brand-logo" href="../index.html">
                <img style="width: 150px; object-fit: contain;" src="../logo.png" alt="Blue Block Logo" />
            </a>
        </div>

        <ul class="sidenav leftside-navigation collapsible sidenav-fixed" id="slide-out">
            <li class="profile-box-custom">
                <div style="display: flex; align-items: center;">
                    <img src="../profile/index/secured/images/userlogo.png" id="pmler2"
                        style="width: 50px; height: 50px; border-radius: 50%; border: 2px solid #2196f3; object-fit: cover;">
                    <div style="margin-left: 15px; color: #fff;">
                        <span id="weuss"
                            style="font-weight: 700; display: block; font-size: 14px; margin-bottom: 2px;">loading...</span>
                        <div style="display: flex; align-items: center;">
                            <span id="country" style="font-size: 12px; opacity: 0.8;">loading...</span>
                            <img id="flag" src="../profile/index/secured/images/userlogo.png" alt="flag">
                        </div>
                    </div>
                </div>
            </li>

            <li><a class="waves-effect" href="../index.html"><i
                        class="material-icons">dashboard</i><span>Dashboard</span></a></li>
            <li><a class="waves-effect" href="../fund-wallet/index.html"><i
                        class="material-icons">account_balance_wallet</i><span>Fund Account</span></a></li>
            <li><a class="waves-effect" href="../investments/index.html"><i
                        class="material-icons">format_list_bulleted</i><span>Pending Deposit</span></a></li>
            <li><a class="waves-effect" href="../trade_history/index.html"><i class="material-icons">dns</i><span>Trade
                        History</span></a></li>
            <li class="active"><a class="waves-effect" href="#"><i class="material-icons">attach_money</i><span>Withdraw
                        Funds</span></a></li>
            <li><a class="waves-effect" href="../market_history/index.html"><i
                        class="material-icons">shopping_bag</i><span>Pending Withdraw</span></a></li>
            <li><a class="waves-effect" href="../deposit_list/index.html"><i
                        class="material-icons">confirmation_number</i><span>Approved Deposit</span></a></li>
            <li><a class="waves-effect" href="../withdrawal-history/index.html"><i
                        class="material-icons">folder</i><span>Withdrawal History</span></a></li>

            <li><a class="waves-effect" href="../profile/index.html"><i
                        class="material-icons">account_circle</i><span>Account Settings</span></a></li>

            <li>
                <a class="waves-effect" id="out" href="javascript:void(0);">
                    <i class="material-icons">exit_to_app</i>
                    <span>Logout</span>
                </a>
            </li>
        </ul>
    </aside>

    <!-- END: SideNav--> <!-- END: SideNav-->


    <!-- END: SideNav--> <!-- END: SideNav-->

    <!-- BEGIN: Page Main-->
    <div id="main">
        <div class="row">
            <div style="background: url(../site-images/image-8.jpg) !important; background-position: center;
             background-size: cover !important; background-repeat: no-repeat; height: 250px !important;"
                class="content-wrapper-before gradient-45deg-indigo-purple"></div>
            <div class="breadcrumbs-dark pb-0 pt-4" id="breadcrumbs-wrapper">
                <!-- Search for small screen-->
                <div class="container">
                    <div class="row">
                        <div class="col s12">
                            <h5 class="breadcrumbs-title mt-0 mb-0" style="color: #fff; text-transform: capitalize;">
                                <span> funds withdrawal </span>
                            </h5>
                            <ol class="breadcrumbs mb-0">
                                <li class="breadcrumb-item"><a href="../index.html">Home</a>
                                </li>
                                <li class="breadcrumb-item active"><a href="#" style="text-transform: capitalize;">Funds
                                        withdrawal</a>
                                </li>
                            </ol>
                        </div>

                    </div>
                </div>
            </div>
            <!-- plan -->
            <div class="row">
                <div class="col s12">
                    <div class="container">



                        <!-- SPINNER DIV -->
                        <div id="spinnerModal" class="spinner-modal" style="display: none;">
                            <div class="spinner-content">
                                <div class="spinner"></div>
                                <p>Loading, please wait...</p>
                            </div>
                        </div>
                        <!-- SPINNER DIV -->

                        <div id="lock-screen" class="row" style="height: unset;">
                            <div class="col s12 m8 l11 z-depth-4 card-panel border-radius-6 forgot-card">
                                <form class="login-form" id="form">
                                    <div class="row">
                                        <div class="input-field col s12 center-align mt-10">
                                            <img class="z-depth-4 circle responsive-img" width="100"
                                                src="../withdraw-funds/index/secured/app-assets/images/bitcoin-usd-bg-770x433.jpg"
                                                alt="">
                                            <h5>Apply for funds withdrawal</h5>

                                            <span style="width: 90%; display: block; margin: 0 auto;"> Supply the
                                                information required below. <br> The specified amount will be payed into
                                                the bitcoin wallet address you specified after your withdrawal request
                                                has been reviewed and approved by the Blue Block accounts
                                                managers.</span>




                                        </div>

                                    </div>

                                    <style>
                                        @media(max-width: 400px) {
                                            .ghjd {
                                                font-size: 12px !important;
                                            }
                                        }
                                    </style>

                                    <div class="row margin">

                                        <div class="col col s12 m8 offset-m2 l6 offset-l3">
                                            <label for="withdrawal_method">Select Withdrawal Method</label>
                                            <select style="height: 3.25rem" name="withdrawalMethod" class="form-control"
                                                id="withdrawalMethod">
                                                <option value="Crypto Transfer">Crypto Transfer</option>
                                                <option value="Bank Transfer">Bank Transfer</option>
                                            </select>
                                        </div>
                                        <!-- /.form group -->
                                        <div id="cryptofom" class="">
                                            <div class="col col s12 m8 offset-m2 l6 offset-l3">
                                                <label for="withdrawal_method">Select Network</label>
                                                <select data-placeholder="Select Method of Payment..." name="pay_method"
                                                    id="pay_method" class="standardSelect form-control" tabindex="1">
                                                    <option selected="" disabled>Please Select Method
                                                    </option>
                                                    <option value="Bitcoin">Bitcoin (BTC)</option>
                                                    <option value="Ethereum">Ethereum (ETH)</option>
                                                    <option value="Solana">Solana (SOL)</option>
                                                    <option value="Binance">Binance (BNB)</option>
                                                    <option value="Ripple">Ripple (XRP)</option>
                                                    <option value="Cardano">Cardano (ADA)</option>
                                                    <option value="Polygon">Polygon (MATIC)</option>
                                                    <option value="Polkadot">Polkadot (DOT)</option>
                                                    <option value="Litecoin">Litecoin (LTC)</option>
                                                    <option value="Avalanche">Avalanche (AVAX)</option>
                                                    <option value="Chainlink">Chainlink (LINK)</option>
                                                    <option value="Shiba">Shiba Inu (SHIB)</option>
                                                </select>
                                            </div>

                                            <div id="beneficiaryField1" style=""
                                                class="input-field col col s12 m8 offset-m2 l6 offset-l3">
                                                <i class="material-icons prefix pt-2">settings</i>
                                                <input name="btc_address" id="btc_address" value="" type="text">

                                                <label class="ghjd" for="btc_address">Wallet Address</label>
                                            </div>

                                        </div>

                                        <div id="banksection" class="hide">

                                            <div id="beneficiaryField4" style=""
                                                class="input-field col col s12 m8 offset-m2 l6 offset-l3">
                                                <i class="material-icons prefix pt-2">tag</i>
                                                <input name="bank_name" id="bank_name" type="text">

                                                <label class="ghjd" for="bank_name">Bank Name</label>
                                            </div>

                                            <div id="beneficiaryField5" style=""
                                                class="input-field col col s12 m8 offset-m2 l6 offset-l3">
                                                <i class="material-icons prefix pt-2">tag</i>
                                                <input name="acct_no" id="acct_no" type="Number">

                                                <label class="ghjd" for="acct_no">Account Number</label>
                                            </div>

                                            <div id="beneficiaryField6" style=""
                                                class="input-field col col s12 m8 offset-m2 l6 offset-l3">
                                                <i class="material-icons prefix pt-2">tag</i>
                                                <input name="acct_name" id="acct_name" type="text">

                                                <label class="ghjd" for="acct_name">Account Name</label>
                                            </div>


                                            <div id="beneficiaryField7" style=""
                                                class="input-field col col s12 m8 offset-m2 l6 offset-l3">
                                                <i class="material-icons prefix pt-2">tag</i>
                                                <input name="acct_swift" id="acct_swift" type="text">

                                                <label class="ghjd" for="acct_swift">Swift Code</label>
                                            </div>

                                        </div>

                                        <div class="input-field col s12 m6 offset-m3">
                                            <i class="material-icons prefix pt-2">attach_money</i>

                                            <input name="amount" required id="amount" type="number" step="0.01" min="1"
                                                placeholder="0.00" oninput="this.value = Math.abs(this.value)">

                                            <label for="amount">Amount To Withdraw</label>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="input-field col s12 m6 offset-m3">
                                            <button type="submit" name="submit" id="form_submit"
                                                style="display: flex;justify-content: center; align-items: center"
                                                class="btn waves-effect waves-light border-round gradient-45deg-purple-deep-orange col s12">
                                                <span> Apply for withdrawal</span>
                                            </button>
                                        </div>
                                    </div>

                                </form>
                            </div>
                        </div>
                    </div>
                    <div class="content-overlay"></div>
                </div>
            </div>
            <!-- plan -->
        </div>



    </div>
    <!-- END: Page Main-->



    <footer style="background: #01123c !important;"
        class="page-footer footer footer-static footer-dark gradient-45deg-indigo-purple gradient-shadow navbar-border navbar-shadow">
        <div class="footer-copyright">
            <div class="container" style="text-align: center;"><span>&copy; 2025 <a href="#" target="_blank">Blue
                        Block</a> All rights reserved.</span></div>
        </div>
    </footer>

    <script src="//code.jivosite.com/widget/mzF45pvueS" async></script>

    <script>
        // CRITICAL: We DO NOT call jivo_api.hide() here.
        // That command disables the chat entirely.
        function jivo_onLoadCallback() {
            // This tells Jivosite's own engine to hide the trigger button
            if (typeof jivo_api !== 'undefined') {
                jivo_api.hide();
                // Note: jivo_api.hide() hides the BUTTON, but jivo_api.open() will still work.
            }
        }

        // Enhanced killer that watches for DOM changes
        const observer = new MutationObserver(() => {
            const bubble = document.querySelector('jdiv[class^="button_"], jdiv[class^="label_"]');
            if (bubble && bubble.style.display !== 'none') {
                bubble.style.setProperty('display', 'none', 'important');
            }
        });

        observer.observe(document.body, { childList: true, subtree: true });
    </script>

    <!-- END: Footer-->
    <!-- BEGIN VENDOR JS-->
    <script src="../withdraw-funds/index/secured/app-assets/js/vendors.min.js"></script>
    <!-- BEGIN VENDOR JS-->
    <!-- BEGIN PAGE VENDOR JS-->
    <script src="../withdraw-funds/index/secured/app-assets/vendors/noUiSlider/nouislider.js"></script>
    <!-- END PAGE VENDOR JS-->
    <!-- BEGIN THEME  JS-->
    <script src="../withdraw-funds/index/secured/app-assets/js/plugins.min.js"></script>
    <script src="../withdraw-funds/index/secured/app-assets/js/search.min.js"></script>
    <script src="../withdraw-funds/index/secured/app-assets/js/custom/custom-script.min.js"></script>
    <script src="../withdraw-funds/index/secured/app-assets/js/scripts/customizer.min.js"></script>
    <!-- END THEME  JS-->
    <!-- BEGIN PAGE LEVEL JS-->
    <script src="../withdraw-funds/index/secured/app-assets/js/scripts/form-elements.min.js"></script>
    <script src="../withdraw-funds/index/secured/app-assets/js/scripts/ui-alerts.min.js"></script>
    <!-- END PAGE LEVEL JS-->
    <script src="sweetalert2/dist/sweetalert2.min.js"></script>
    <script src="wallet-address-validator-master/wallet-address-validator.min.js"></script>



    <!-- SPINNER CSS -->
    <style>
        .spinner-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.938);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
        }

        .spinner-content {
            text-align: center;
            color: white;
        }

        .spinner {
            border: 6px solid #f3f3f3;
            border-top: 6px solid #ffffff;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto 10px;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }
    </style>


    <div class="mobile-bottom-nav">
        <a href="../index.html" class="mobile-nav-item">
            <i class="material-icons">dashboard</i>
            <span>Dashboard</span>
        </a>
        <a href="../fund-wallet/index.html" class="mobile-nav-item">
            <i class="material-icons">account_balance_wallet</i>
            <span>Fund</span>
        </a>
        <a href="javascript:void(0);" onclick="showHistoryOptions()" class="mobile-nav-item active">
            <i class="material-icons">history</i>
            <span>History</span>
        </a>
        <a href="../withdraw-funds/index.html" class="mobile-nav-item">
            <i class="material-icons">attach_money</i>
            <span>Withdraw</span>
        </a>
        <a href="../profile/index.html" class="mobile-nav-item ">
            <i class="material-icons">settings</i>
            <span>Settings</span>
        </a>
    </div>

</body>



<!--   -->

</html>